<% content_for :body_class do %>person-page<% end %>

<% content_for :back_button do %>
    <a class="app-header__back" href="<%= url "/countries" %>"><i class="fa fa-chevron-left"></i></a>
<% end %>

<% if @people.any? %>

    <h3><%= @legislative_period.name %></h3>

<div class="progress-bar progress-bar--healthy" data-total="<%= @legislative_period.unique_people.size %>"><div style="width: <%= percent_complete_term(@legislative_period) %>%"></div></div>

<div class="tindr-cards js-jtinder">
    <ul>
        <% @people.take(2).each do |person| %>
            <%= erb :person_partial, locals: { person: person } %>
        <% end %>
    </ul>
    <div class="level-complete">
        <h2><%= ['Well done!', 'High fives!', 'Awesome!', 'Nice work!' ].sample %></h2>
        <% if @legislative_period.previous_legislative_period %>
            <% previous_count = @legislative_period.previous_legislative_periods.count %>
            <p>
                You have completed <b><%= @legislative_period.legislature[:name] %> <%= @legislative_period.name %></b>.
                There <%= previous_count == 1 ? 'is' : 'are' %>
                <%= previous_count %> more level<%= previous_count == 1 ? '' : 's' %> to play.
            </p>
            <p>
                <a class="button button--secondary" href="<%= url "/countries/#{@legislative_period.country[:slug]}/legislatures/#{@legislative_period.legislature[:slug]}" %>">
                    Proceed to <%= @legislative_period.previous_legislative_period.name %>
                </a>
            </p>
        <% else %>
            <% if @legislative_period.country[:legislatures].size == 1 %>
                <p>You have completed <%= @legislative_period.country[:name] %>.</p>
                <p>
                    <a class="button button--secondary" href="<%= url "/countries" %>">
                        Choose another country
                    </a>
                </p>
            <% else %>
                <p>You have completed <%= @legislative_period.country[:name] %> <%= @legislative_period.legislature[:name] %>.</p>
                <p>
                    <a class="button button--secondary" href="<%= url "/countries/#{@legislative_period.country[:slug]}" %>">
                        Choose another legislature
                    </a>
                </p>
            <% end %>
        <% end %>
    </div>
</div>

<ul class="js-extra-people" style="display: none">
    <% @people.drop(2).each do |person| %>
        <%= erb :person_partial, locals: { person: person } %>
    <% end %>
</ul>

<div class="controls">
    <a class="controls__other js-person-other" href="#">Other</a>
    <a class="controls__male js-jtinder-dislike" href="#">Male</a>
    <a class="controls__female js-jtinder-like" href="#">Female</a>
    <a class="controls__skip js-person-skip" href="#">Donâ€™t<br>know</a>
    <span class="controls__google">Not sure? <a class="js-google-link" href="#" target="_blank"><i class="fa fa-search"></i>Google them!</a></span>
</div>

<% else %>
    <p>All done! There are no more people to classify for <%= @legislative_period.legislature[:name] %> <%= @legislative_period[:name] %></p>
<% end %>
